# 二维码分享模块 - 需求文档

## 功能范围

### 1. 二维码生成
- 每个设备自动生成唯一二维码
- 二维码内容：设备详情页URL
- 二维码格式：PNG，300x300px
- 存储位置：与设备图片同目录

### 2. 分享页面
- URL格式：`/share/{设备ID}`
- 页面内容：
  - 设备主图
  - 设备型号和分类
  - 所在地区
  - 价格
  - 联系方式（需登录查看）
  - "查看更多设备"按钮
  - "我也要发布"按钮

### 3. 扫码统计
- 记录扫码时间
- 记录扫码来源（微信/浏览器/其他）
- 统计扫码次数
- 设备主可查看扫码数据

### 4. 海报生成
- 设备图片 + 二维码
- 设备信息文字
- 平台Logo
- 下载/分享

## 数据模型

### ScanLog表
- id, equipmentId, source
- ipAddress, userAgent
- createdAt

## API接口

1. GET /api/v1/equipment/:id/qrcode - 获取二维码
2. GET /api/v1/share/:id - 分享页面数据
3. POST /api/v1/equipment/:id/scan - 记录扫码
4. GET /api/v1/equipment/:id/scan-stats - 扫码统计

## 技术方案

### 二维码生成
- qrcode库生成
- 设备发布时自动生成
- 存储到对象存储

### 扫码来源识别
- User-Agent解析
- 微信内置浏览器检测
- 来源统计

## 验收标准

- 二维码生成成功率 100%
- 扫码跳转正确
- 统计数据准确
- 分享页面加载快
