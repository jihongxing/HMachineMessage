# é‡å‹æœºæ¢°ä¿¡æ¯ä¸­ä»‹å¹³å°

ä¸€ä¸ªä¸“ä¸šçš„é‡å‹æœºæ¢°ä¿¡æ¯å±•ç¤ºå’Œæ’®åˆæœåŠ¡å¹³å°ï¼Œä¸ºæœºæ¢°æ‰€æœ‰è€…å’Œéœ€æ±‚æ–¹æä¾›ä¾¿æ·çš„ä¿¡æ¯å‘å¸ƒå’ŒæŸ¥è¯¢æœåŠ¡ã€‚

## é¡¹ç›®ç®€ä»‹

æœ¬å¹³å°æ˜¯ä¸€ä¸ªå…¨å›½æ€§çš„é‡å‹æœºæ¢°ä¿¡æ¯ä¸­ä»‹å¹³å°ï¼Œæä¾›å…è´¹åŸºç¡€å±•ç¤ºå’Œå¢å€¼æ’åä»˜è´¹æœåŠ¡ã€‚å¹³å°ä»…æä¾›ä¿¡æ¯å±•ç¤ºå’Œä¾›éœ€æ’®åˆï¼Œä¸å‚ä¸ä½œä¸šè°ƒåº¦æˆ–äº¤æ˜“ç»“ç®—ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ†“ **å…è´¹å‘å¸ƒ**ï¼šæœºæ¢°ä¿¡æ¯å…è´¹å‘å¸ƒå’Œå±•ç¤º
- ğŸ” **ç²¾å‡†æœç´¢**ï¼šæŒ‰åˆ†ç±»ã€åœ°åŒºã€ä»·æ ¼ç­‰å¤šç»´åº¦ç­›é€‰
- ğŸ“± **äºŒç»´ç åˆ†äº«**ï¼šç”Ÿæˆè®¾å¤‡äºŒç»´ç ï¼Œæ–¹ä¾¿çº¿ä¸‹æ¨å¹¿
- ğŸ’ **å¢å€¼æœåŠ¡**ï¼šæ¨èä½ï¼ˆ100å…ƒ/æœˆï¼‰ã€ç½®é¡¶ä½ï¼ˆ200å…ƒ/æœˆï¼‰
- ğŸ¨ **ä¸»é¢˜åˆ‡æ¢**ï¼šæ”¯æŒæ˜æš—ä¸»é¢˜
- ğŸŒ **å›½é™…åŒ–**ï¼šæ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**ï¼šæµè§ˆé‡ã€è”ç³»æ¬¡æ•°ã€æ‰«ç ç»Ÿè®¡
- ğŸ”’ **å®‰å…¨é˜²æŠ¤**ï¼šAPIé™æµã€è¯·æ±‚ç­¾åã€æ•°æ®è„±æ•

### æŠ€æœ¯ç‰¹ç‚¹

- å“åº”å¼è®¾è®¡ï¼Œç§»åŠ¨ç«¯ä¼˜å…ˆ
- æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼ŒSEOå‹å¥½
- æ™ºèƒ½å®¡æ ¸ç³»ç»Ÿï¼Œå‡å°‘äººå·¥å®¡æ ¸
- é«˜æ€§èƒ½ç¼“å­˜ï¼Œæ¯«ç§’çº§å“åº”
- å®Œå–„çš„æƒé™ç®¡ç†å’Œå®‰å…¨é˜²æŠ¤

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**ï¼šNext.js 14 + React 18
- **è¯­è¨€**ï¼šTypeScript
- **æ ·å¼**ï¼šTailwind CSS
- **çŠ¶æ€ç®¡ç†**ï¼šZustand
- **HTTPå®¢æˆ·ç«¯**ï¼šAxios
- **è¡¨å•éªŒè¯**ï¼šReact Hook Form + Zod

### åç«¯
- **æ¡†æ¶**ï¼šExpress.js
- **è¯­è¨€**ï¼šTypeScript
- **æ•°æ®åº“**ï¼šPostgreSQL + Prisma ORM
- **ç¼“å­˜**ï¼šRedis
- **æ–‡ä»¶å­˜å‚¨**ï¼šMinIO
- **è®¤è¯**ï¼šJWT
- **å›¾ç‰‡å¤„ç†**ï¼šSharp
- **äºŒç»´ç ç”Ÿæˆ**ï¼šQRCode

### åŸºç¡€è®¾æ–½
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **åå‘ä»£ç†**ï¼šNginx
- **è¿›ç¨‹ç®¡ç†**ï¼šPM2
- **æ—¥å¿—**ï¼šWinston

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- PostgreSQL >= 14
- Redis >= 6
- MinIOï¼ˆå¯é€‰ï¼Œç”¨äºå¯¹è±¡å­˜å‚¨ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/jihongxing/HMachineMessage.git
cd HMachineMessage
```

2. **å®‰è£…ä¾èµ–**
```bash
# å®‰è£…æ ¹ç›®å½•ä¾èµ–
npm install

# å®‰è£…å„æ¨¡å—ä¾èµ–
cd backend && npm install
cd ../frontend && npm install
cd ../shared && npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

åç«¯é…ç½®ï¼ˆ`backend/.env`ï¼‰ï¼š
```env
# æ•°æ®åº“
DATABASE_URL="postgresql://user:password@localhost:5432/hmachine"

# JWTå¯†é’¥
JWT_SECRET="your-secret-key"

# Redis
REDIS_HOST="localhost"
REDIS_PORT=6379

# MinIO
MINIO_ENDPOINT="localhost"
MINIO_PORT=9000
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"
MINIO_BUCKET="hmachine"

# æœåŠ¡ç«¯å£
PORT=3001
```

å‰ç«¯é…ç½®ï¼ˆ`frontend/.env.local`ï¼‰ï¼š
```env
NEXT_PUBLIC_API_URL=http://localhost:3001
```

4. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
cd backend
npx prisma migrate dev
npx prisma generate
npm run seed:all
```

5. **å¯åŠ¨æœåŠ¡**

å¼€å‘ç¯å¢ƒï¼š
```bash
# å¯åŠ¨åç«¯
cd backend
npm run dev

# å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm run dev
```

ç”Ÿäº§ç¯å¢ƒï¼š
```bash
# æ„å»º
npm run build

# å¯åŠ¨
npm start
```

6. **è®¿é—®åº”ç”¨**
- å‰ç«¯ï¼šhttp://localhost:3000
- åç«¯APIï¼šhttp://localhost:3001

### Dockeréƒ¨ç½²

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

## é¡¹ç›®ç»“æ„

```
HMachineMessage/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ routes/         # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ prisma/             # æ•°æ®åº“æ¨¡å‹å’Œè¿ç§»
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/           # Next.jsé¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/    # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/           # å·¥å…·åº“
â”‚   â”‚   â””â”€â”€ styles/        # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ shared/                 # å…±äº«ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ src/types/
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ APIæ¥å£æ–‡æ¡£.md
â”‚   â”œâ”€â”€ éƒ¨ç½²æ–‡æ¡£.md
â”‚   â”œâ”€â”€ å¼€å‘æ–‡æ¡£.md
â”‚   â”œâ”€â”€ ç”¨æˆ·æ³¨å†Œåè®®.md
â”‚   â”œâ”€â”€ éšç§æ”¿ç­–.md
â”‚   â””â”€â”€ ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ.md
â”œâ”€â”€ docker-compose.yml      # Dockerç¼–æ’
â””â”€â”€ README.md
```

## æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### ç”¨æˆ·ç³»ç»Ÿ
- æ‰‹æœºå·æ³¨å†Œ/ç™»å½•
- å¯†ç ç™»å½•/éªŒè¯ç ç™»å½•
- å¾®ä¿¡å¿«æ·ç™»å½•
- å®åè®¤è¯/ä¼ä¸šè®¤è¯
- ç”¨æˆ·ç­‰çº§ä½“ç³»ï¼ˆæ–°ç”¨æˆ·/æ™®é€š/ä¼˜è´¨/è®¤è¯ï¼‰

### è®¾å¤‡ç®¡ç†
- è®¾å¤‡å‘å¸ƒï¼ˆæ”¯æŒ3-9å¼ å›¾ç‰‡ï¼‰
- æ™ºèƒ½å®¡æ ¸ï¼ˆæ–°ç”¨æˆ·äººå·¥å®¡æ ¸ï¼Œä¼˜è´¨ç”¨æˆ·å…å®¡æ ¸ï¼‰
- è®¾å¤‡ç¼–è¾‘/åˆ é™¤/ä¸Šä¸‹æ¶
- è®¾å¤‡è¯¦æƒ…å±•ç¤º
- äºŒç»´ç ç”Ÿæˆå’Œåˆ†äº«

### æœç´¢ç­›é€‰
- å…³é”®è¯æœç´¢
- åˆ†ç±»ç­›é€‰ï¼ˆä¸€çº§+äºŒçº§ï¼‰
- åœ°åŒºç­›é€‰ï¼ˆçœå¸‚å¿ï¼‰
- ä»·æ ¼åŒºé—´ç­›é€‰
- å¤šç§æ’åºï¼ˆæœ€æ–°/ä»·æ ¼/è·ç¦»/æ’åï¼‰

### å¢å€¼æœåŠ¡
- åŸºç¡€å±•ç¤ºï¼š0å…ƒ/æœˆï¼ˆå…è´¹ï¼‰
- æ¨èä½ï¼š100å…ƒ/æœˆï¼ˆæ©™è‰²æ ‡è¯†ï¼‰
- ç½®é¡¶ä½ï¼š200å…ƒ/æœˆï¼ˆçº¢è‰²æ ‡è¯†ï¼‰
- æ”¯æŒå¾®ä¿¡/æ”¯ä»˜å®/ä½™é¢æ”¯ä»˜

### æ•°æ®ç»Ÿè®¡
- æµè§ˆé‡ç»Ÿè®¡
- è”ç³»æ¬¡æ•°ç»Ÿè®¡
- æ‰«ç æ¬¡æ•°ç»Ÿè®¡
- è¶‹åŠ¿å›¾è¡¨å±•ç¤º

## å¼€å‘æŒ‡å—

è¯¦è§ [å¼€å‘æ–‡æ¡£](docs/å¼€å‘æ–‡æ¡£.md)

## APIæ–‡æ¡£

è¯¦è§ [APIæ¥å£æ–‡æ¡£](docs/APIæ¥å£æ–‡æ¡£.md)

## éƒ¨ç½²æŒ‡å—

è¯¦è§ [éƒ¨ç½²æ–‡æ¡£](docs/éƒ¨ç½²æ–‡æ¡£.md)

## ç”¨æˆ·æ–‡æ¡£

- [ç”¨æˆ·æ³¨å†Œåè®®](docs/ç”¨æˆ·æ³¨å†Œåè®®.md)
- [éšç§æ”¿ç­–](docs/éšç§æ”¿ç­–.md)
- [ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ](docs/ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ.md)

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€ï¼šhttps://github.com/jihongxing/HMachineMessage
- é—®é¢˜åé¦ˆï¼šhttps://github.com/jihongxing/HMachineMessage/issues

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼
