# ============================================
# 环境配置
# ============================================
# 运行环境：development(开发) | production(生产) | test(测试)
NODE_ENV=development

# 服务端口号，默认3001
PORT=3001

# ============================================
# 数据库配置
# ============================================
# PostgreSQL数据库连接字符串
# 格式：postgresql://用户名:密码@主机:端口/数据库名
# 示例：postgresql://postgres:postgres@localhost:5432/machinery_platform
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/machinery_platform

# ============================================
# Redis缓存配置
# ============================================
# Redis连接字符串，用于缓存和会话存储
# 格式：redis://主机:端口
# 示例：redis://localhost:6380
REDIS_URL=redis://localhost:6380

# ============================================
# JWT认证配置
# ============================================
# JWT密钥，用于生成和验证token，生产环境必须修改为复杂字符串
JWT_SECRET=your-secret-key-change-in-production

# JWT过期时间，支持格式：7d(7天) | 24h(24小时) | 60m(60分钟)
JWT_EXPIRES_IN=7d

# ============================================
# CORS跨域配置
# ============================================
# 允许跨域访问的前端地址，多个地址用逗号分隔
# 开发环境：http://localhost:3000
# 生产环境：https://yourdomain.com
CORS_ORIGIN=http://localhost:3000

# ============================================
# 文件上传配置
# ============================================
# 上传凭证密钥，用于生成临时上传token
UPLOAD_SECRET=upload-secret-key-change-in-production

# 上传接口地址，前端调用的完整URL
UPLOAD_ENDPOINT=http://localhost:3001/api/v1

# ============================================
# 应用配置
# ============================================
# 后端API基础地址
APP_BASE_URL=http://localhost:3001

# 前端网站地址，用于生成二维码、邮件链接等
FRONTEND_URL=http://localhost:3000

# ============================================
# 地图API配置（高德地图）
# ============================================
# 高德地图API Key，申请地址：https://lbs.amap.com/
# 个人开发者免费，每日配额：30万次
AMAP_KEY=your_amap_key_here

# 高德地图API Secret（可选）
AMAP_SECRET=your_amap_secret_here

# ============================================
# 反爬虫配置
# ============================================
# 反爬虫总开关：true(启用) | false(禁用)
# 开发环境建议false，生产环境建议true
ANTI_CRAWLER_ENABLED=false

# User-Agent检测：true(启用) | false(禁用)
# 检测并拦截爬虫UA特征（bot/spider/crawler等）
ANTI_CRAWLER_CHECK_UA=false

# Referer检测：true(启用) | false(禁用)
# 检查请求来源，防止盗链
ANTI_CRAWLER_CHECK_REFERER=false

# 频率限制：true(启用) | false(禁用)
# 限制单个IP的请求频率
ANTI_CRAWLER_RATE_LIMIT=true

# 频率限制-最大请求数
# 在时间窗口内允许的最大请求次数，建议：100-200
ANTI_CRAWLER_MAX_REQUESTS=100

# 频率限制-时间窗口（毫秒）
# 统计请求的时间窗口，60000=1分钟，建议：60000-300000
ANTI_CRAWLER_WINDOW_MS=60000

# 指纹识别：true(启用) | false(禁用)
# 基于浏览器指纹识别异常行为
ANTI_CRAWLER_FINGERPRINT=true

# IP封禁时长（秒）
# 触发规则后封禁IP的时长，3600=1小时，建议：3600-86400
ANTI_CRAWLER_BLOCK_DURATION=3600

# 允许的域名列表（逗号分隔）
# 用于Referer检测，允许这些域名的请求
ALLOWED_DOMAINS=localhost:3000

# ============================================
# 存储配置
# ============================================
# 存储提供者：minio | oss | qiniu
# minio: 自建对象存储（免费）
# oss: 阿里云OSS（付费）
# qiniu: 七牛云（付费）
STORAGE_PROVIDER=minio

# ============================================
# MinIO对象存储配置
# ============================================
# MinIO服务地址（不含http://）
MINIO_ENDPOINT=localhost

# MinIO服务端口，默认9000
MINIO_PORT=9000

# 是否使用SSL：true | false
# 开发环境false，生产环境建议true
MINIO_USE_SSL=false

# MinIO访问密钥（Access Key）
# 默认：minioadmin，生产环境必须修改
MINIO_ACCESS_KEY=minioadmin

# MinIO密钥（Secret Key）
# 默认：minioadmin，生产环境必须修改
MINIO_SECRET_KEY=minioadmin

# MinIO存储桶名称
# 用于存储上传的文件，建议：machinery-images
MINIO_BUCKET=machinery-images

# CDN加速地址（可选）
# 如果配置了CDN，填写CDN域名，否则留空
# 示例：https://cdn.yourdomain.com
MINIO_CDN_URL=
